# EpiphanyV2 — UX/UI 设计规范 V3

> **版本**: 3.0
> **更新日期**: 2025-01-XX
> **参考产品**: [Consider.it](https://consider.it/)
> **核心理念**: Topic 是一等公民，上下布局，旭日图导航

---

## 第一部分：设计哲学重构

### 1.1 核心问题分析

**之前的设计问题**：
1. ❌ 左右双栏布局在移动端不友好，信息分散
2. ❌ 首页旭日图概念过于抽象，新用户无从下手
3. ❌ P5 强风格过于视觉导向，牺牲了可用性

**新设计原则**：
1. ✅ **上下布局** — 符合自然阅读顺序，移动端优先
2. ✅ **Topic 是一等公民** — 首页直接展示 Topic 列表
3. ✅ **旭日图保留** — 在 Topic 详情页内，用旭日图导航论点树
4. ✅ **渐进式复杂度** — 核心功能简单，高级功能按需展示

---

### 1.2 交互模型

**两层导航结构**：

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│   首页（Topic 列表）                                          │
│   ─────────────────                                         │
│   用户看到所有议题，选择感兴趣的进入                            │
│                                                             │
│         │                                                   │
│         ▼                                                   │
│                                                             │
│   Topic 详情页（旭日图导航）                                   │
│   ─────────────────────────                                 │
│   旭日图展示论点树结构                                         │
│   点击节点 → 查看该论点详情                                    │
│   QV 投票、添加回复                                           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 1.3 新设计北极星

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│   "让每个人都能轻松参与有意义的讨论"                            │
│                                                             │
│   1. 首页即内容 — Topic 列表直接可见，无需抽象理解              │
│   2. 旭日图导航 — 在 Topic 内用旭日图探索论点结构               │
│   3. 上下布局 — 符合阅读习惯，移动端友好                        │
│   4. 渐进参与 — 先浏览，再投票，最后贡献                        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 第二部分：信息架构

### 2.1 页面结构（简化）

```
/                       → 首页（Topic 列表，直接可见内容）
/topics/:topicId        → Topic 详情（★ 核心体验 ★）
/my                     → 我的活动（投票记录、身份管理）
/new                    → 创建 Topic
```

**关键变化**：
- 首页直接是 Topic 列表，不是抽象可视化
- Topic 详情页是完整的上下滚动体验
- 移除不必要的嵌套路由

---

### 2.2 Topic 详情页结构（上下布局 + 旭日图）

```
┌─────────────────────────────────────────────────────────────┐
│  [TopBar] 简洁导航 + 身份指示 + 余额                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │  [Topic Header]                                     │    │
│  │  ───────────────                                    │    │
│  │  议题标题（大字醒目）                                  │    │
│  │  议题描述/背景（根节点内容）                           │    │
│  │  状态 | 参与人数 | 论点数                             │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │  [Sunburst View] 🎯 旭日图导航区                     │    │
│  │  ─────────────────                                  │    │
│  │                                                     │    │
│  │              ╭─────────╮                            │    │
│  │           ╱              ╲                          │    │
│  │         ╱     ╭─────╮     ╲                        │    │
│  │        │    ╱   TM   ╲    │                        │    │
│  │        │   │  (根节点) │   │                        │    │
│  │        │    ╲        ╱    │                        │    │
│  │         ╲     ╰─────╯     ╱                        │    │
│  │           ╲              ╱                          │    │
│  │              ╰─────────╯                            │    │
│  │                                                     │    │
│  │  [点击扇区选择论点，颜色表示立场]                      │    │
│  │  🔵 支持  🟡 中立  🔴 反对                          │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │  [Selected Argument] 选中论点详情                    │    │
│  │  ────────────────────                               │    │
│  │                                                     │    │
│  │  标题: 选中论点的标题                                 │    │
│  │  内容: 论点正文...                                   │    │
│  │  立场: 🔵 支持 (+0.7)                               │    │
│  │  票数: ●42 票 (消耗 1764 credits)                   │    │
│  │  作者: abc123...                                    │    │
│  │                                                     │    │
│  │  [投票滑块] ◀━━━━━━●━━━━━━▶ 当前: 3票               │    │
│  │             0        10                             │    │
│  │                                                     │    │
│  │  [确认投票] [添加回复]                               │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │  [Replies] 子论点列表                                │    │
│  │  ────────────────                                   │    │
│  │                                                     │    │
│  │  ┌────────────────────────────────────────────┐     │    │
│  │  │ 🔵 子论点1标题                    ●12票    │     │    │
│  │  │    子论点内容摘要...                        │     │    │
│  │  └────────────────────────────────────────────┘     │    │
│  │                                                     │    │
│  │  ┌────────────────────────────────────────────┐     │    │
│  │  │ 🔴 子论点2标题                    ●8票     │     │    │
│  │  │    子论点内容摘要...                        │     │    │
│  │  └────────────────────────────────────────────┘     │    │
│  │                                                     │    │
│  │  [+ 添加新论点]                                     │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**交互流程**：
1. 进入 Topic → 看到旭日图展示整个论点树
2. 点击旭日图扇区 → 选中该论点
3. 下方显示论点详情 + 投票控件 + 子论点列表
4. 可以投票、添加回复，或继续点击旭日图探索其他论点

---

## 第三部分：核心交互设计

### 3.1 旭日图导航（Sunburst Navigation）

**设计原理**：
- 旭日图展示 Topic 下的论点树层级结构
- 中心是根节点（Topic 主题），向外辐射是回复/子论点
- 扇区颜色表示立场（支持/中立/反对）
- 扇区大小可以表示投票权重

```
              外层 = 第2层论点（回复的回复）
                    ╱
           ╭───────────────╮
        ╱                     ╲
      ╱   ╭───────────────╮     ╲
     │  ╱                   ╲    │  ← 中层 = 第1层论点（直接回复）
     │ │    ╭─────────╮    │    │
     │ │   │    TM    │    │    │  ← 中心 = 根节点
     │ │   │  (Topic) │    │    │
     │ │    ╰─────────╯    │    │
     │  ╲                   ╱    │
      ╲   ╰───────────────╯     ╱
        ╲                     ╱
           ╰───────────────╯
```

**颜色编码**：
| 立场 | stanceScore 范围 | 颜色 |
|-----|-----------------|------|
| 强烈支持 | +0.67 ~ +1.0 | 深蓝 `#1D4ED8` |
| 支持 | +0.33 ~ +0.67 | 蓝色 `#3B82F6` |
| 中立 | -0.33 ~ +0.33 | 黄色 `#F59E0B` |
| 反对 | -0.67 ~ -0.33 | 红色 `#EF4444` |
| 强烈反对 | -1.0 ~ -0.67 | 深红 `#B91C1C` |
| 未分析 | null | 灰色 `#9CA3AF` |

**交互细节**：
1. **Hover** — 高亮扇区，显示论点标题 tooltip
2. **Click** — 选中该论点，下方显示详情
3. **双击/长按** — 钻入该节点为新中心（可选功能）

---

### 3.2 QV 投票滑块（Vote Slider）

**设计原理**（保留 QV 机制）：
- 滑块范围 0-10 票
- 成本 = 票数²（QV 机制核心）
- 实时显示成本变化

```
你对这个论点的投票:

◀━━━━━━━━━━━━━●━━━━━━━━━━━━━▶
0              5              10

当前: 5 票
成本: 25 credits
余额: 75 → 50 credits

[确认投票]
```

**交互细节**：
1. 拖动滑块 → 实时显示票数和成本
2. 成本超过余额 → 滑块受限，显示提示
3. 确认投票 → 调用 API，更新余额

---

### 3.3 论点详情卡片（Argument Detail Card）

**布局**：选中论点后在旭日图下方显示

```
┌─────────────────────────────────────────────────────────────┐
│  [立场标签] 🔵 支持 (+0.72)                                  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  论点标题（如有）                                             │
│  ─────────────────────────────────────────────────────────  │
│                                                             │
│  论点正文内容。这里显示完整的论点文本，支持富文本格式。          │
│  可能包含多个段落...                                          │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  📊 ●42票 (消耗 1764 credits)                               │
│  👤 作者: abc123...                                         │
│  🕐 创建于: 2小时前                                          │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [投票滑块区域]                                               │
│  ◀━━━━━━━━━●━━━━━━━━━▶  3票 = 9 credits                    │
│                                                             │
│  [确认投票]  [添加回复]  [查看子论点 (8)]                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

### 3.4 子论点列表（Replies List）

**布局**：在论点详情下方，列出所有直接回复

```
┌─────────────────────────────────────────────────────────────┐
│  💬 子论点 (8)                        排序: 票数 | 时间      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ 🔵 支持论点的标题                                    │    │
│  │ ──────────────────────────────────────────────────  │    │
│  │ 论点内容摘要，最多显示两行...                         │    │
│  │                                                     │    │
│  │ ●12票  👤 def456...  🕐 1小时前                     │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ 🔴 反对论点的标题                                    │    │
│  │ ──────────────────────────────────────────────────  │    │
│  │ 这是一个反对观点...                                  │    │
│  │                                                     │    │
│  │ ●8票   👤 ghi789...  🕐 30分钟前                    │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
│  [加载更多]                                                  │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │  [+ 添加新论点]                                     │    │
│  │  选择立场: [支持] [中立] [反对]                       │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**交互逻辑**：
1. 点击子论点卡片 → 在旭日图中高亮 + 更新详情区
2. 点击"添加新论点" → 展开输入框
3. 选择立场 → 影响新论点的 stanceScore

---

## 第四部分：首页设计

### 4.1 首页布局（Topic 列表）

**设计原则**：
- 直接展示 Topic 列表，用户立即看到可参与的议题
- 每个 Topic 卡片显示：标题、描述摘要、参与度、意见分布预览
- 支持按热度/最新/状态筛选

```
┌─────────────────────────────────────────────────────────────┐
│  [Header]                                                   │
│  Epiphany — 让每个声音都被听见                               │
│  [创建议题]                                                  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [筛选栏] 全部 | 进行中 | 已结束     排序: 热度 | 最新         │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │  📋 议题标题一                                       │    │
│  │  ─────────────────────────────────────────────────  │    │
│  │  议题描述摘要，最多两行文字...                         │    │
│  │                                                     │    │
│  │  [迷你意见分布条] ████████░░░░████                   │    │
│  │                   反对    中立   支持                │    │
│  │                                                     │    │
│  │  👥 42人参与  💬 18个观点  🕐 3小时前                │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │  📋 议题标题二                                       │    │
│  │  ...                                                │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
│  [加载更多]                                                  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 Topic 卡片设计

```typescript
interface TopicCardProps {
  topic: {
    id: string;
    title: string;
    description: string;
    status: 'active' | 'frozen' | 'archived';
    participantCount: number;
    argumentCount: number;
    createdAt: string;
    // 意见分布预览
    stanceDistribution: {
      oppose: number;   // -1 ~ -0.33 的人数比例
      neutral: number;  // -0.33 ~ 0.33 的人数比例
      support: number;  // 0.33 ~ 1 的人数比例
    };
  };
}
```

**迷你意见分布条**：
```
  反对        中立        支持
  ████████░░░░░░░░████████
  30%         20%        50%
```

---

## 第五部分：视觉风格（简化版）

### 5.1 色彩系统（精简）

| Token | Hex | 用途 |
|-------|-----|------|
| `--text-primary` | `#1F2937` | 主文字 |
| `--text-secondary` | `#6B7280` | 次要文字 |
| `--bg-primary` | `#FFFFFF` | 主背景 |
| `--bg-secondary` | `#F9FAFB` | 次要背景 |
| `--border` | `#E5E7EB` | 边框 |
| `--oppose` | `#EF4444` | 反对/红色 |
| `--neutral` | `#F59E0B` | 中立/黄色 |
| `--support` | `#3B82F6` | 支持/蓝色 |
| `--accent` | `#8B5CF6` | 强调色/紫色 |

### 5.2 排版（精简）

| 元素 | 字体 | 大小 | 行高 |
|-----|------|------|------|
| 页面标题 | Inter/系统字体 | 24px | 1.3 |
| 卡片标题 | Inter/系统字体 | 18px | 1.4 |
| 正文 | Inter/系统字体 | 16px | 1.6 |
| 辅助文字 | Inter/系统字体 | 14px | 1.5 |

### 5.3 组件风格

**卡片**：
- 白色背景
- 1px 边框 `--border`
- 8px 圆角
- 轻微阴影 `0 1px 3px rgba(0,0,0,0.1)`

**按钮**：
- 主按钮：`--accent` 背景，白色文字
- 次要按钮：透明背景，`--accent` 边框和文字

**滑块**：
- 轨道：灰色渐变（反对→中立→支持）
- 滑块：圆形，`--accent` 颜色，阴影

---

## 第六部分：用户流程

### 6.1 新用户首次体验

```
1. 进入首页
   ↓ 看到 Topic 列表，选择感兴趣的议题

2. 进入 Topic 详情
   ↓ 阅读议题标题和描述

3. 查看社区意见分布
   ↓ 通过 histogram 了解大家的立场

4. 表达自己的立场
   ↓ 拖动滑块到合适位置

5. 浏览 Pro/Con 观点
   ↓ 看看支持和反对的理由

6. 采纳或贡献观点
   ↓ 点击"采纳"或"添加新观点"

7. 深入讨论（可选）
   ↓ 对观点进行投票或回复
```

### 6.2 创建者流程

```
1. 点击"创建议题"
   ↓

2. 填写议题信息
   - 标题（必填）
   - 描述/背景（选填）
   ↓

3. 确认创建
   ↓ 获得 topic ID 和分享链接

4. 分享链接
   ↓ 通过社交媒体、消息等传播

5. 管理议题（可选）
   - 冻结/归档
   - 查看报告
```

---

## 第七部分：响应式设计

### 7.1 断点

| 断点 | 宽度 | 布局调整 |
|-----|------|---------|
| Mobile | < 640px | 单列，Pro/Con 上下堆叠 |
| Tablet | 640-1024px | Pro/Con 左右并列 |
| Desktop | > 1024px | 最大宽度 1200px，居中 |

### 7.2 移动端优化

**Opinion Slider**：
- 滑块高度增加到 48px，便于触摸
- Histogram 简化为色条（不显示头像）

**Pro/Con 列表**：
- 切换为 Tab 式切换（支持/反对）
- 减少每个观点卡片的信息密度

---

## 第八部分：实施计划

### Phase 1: 基础框架重构
- [ ] 简化色彩系统（移除 P5 强风格）
- [ ] 重构首页为 Topic 列表页
- [ ] TopicCard 组件（含迷你分布条）

### Phase 2: Topic 详情页（上下布局）
- [ ] TopicHeader 组件（标题、描述、状态）
- [ ] 保留并优化 SunburstView 组件
- [ ] ArgumentDetailCard 组件（选中论点详情）
- [ ] RepliesList 组件（子论点列表）

### Phase 3: 投票交互
- [ ] VoteSlider 组件（QV 投票滑块）
- [ ] 投票确认流程
- [ ] 余额实时更新

### Phase 4: 回复功能
- [ ] AddArgumentForm 组件
- [ ] 立场选择器
- [ ] 提交回复流程

### Phase 5: 响应式与优化
- [ ] 移动端布局适配
- [ ] 旭日图触摸交互优化
- [ ] 性能优化

---

## 与旧设计的对比

| 方面 | 旧设计 (V2) | 新设计 (V3) |
|-----|------------|------------|
| **首页** | 旭日图（所有 Topic） | Topic 列表 |
| **布局** | 左右双栏 | 上下单栏 |
| **旭日图** | 首页展示 | Topic 内部导航 |
| **风格** | P5 强风格 | 简洁实用 |
| **核心交互** | 保留 | 保留（QV + 旭日图） |

---

## 参考资料

- [Consider.it](https://consider.it/) - 布局参考
- [Consider.it GitHub](https://github.com/Considerit/ConsiderIt) - 开源实现
- [Democracy Technologies - Consider.it](https://democracy-technologies.org/tool/consider-it/) - 产品介绍
